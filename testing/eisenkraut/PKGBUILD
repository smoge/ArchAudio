# Contributor: Bernardo Barros <bernardobarros@gmail.com>

pkgname=eisenkraut
pkgver=0.74
pkgrel=1
pkgdesc="a standalone, cross-platform audio file editor using the SuperCollider 3 server application."
arch=('any')
url="http://www.sciss.de/eisenkraut/"
license=('GPL')
depends=('jre')
makedepends=('apache-ant')
source=(http://sourceforge.net/projects/eisenkraut/files/eisenkraut/${pkgver}/Eisenkraut-src-${pkgver}.zip)
md5sums=('19f6af865bfc302f12a4c47f2968281d')

build() {
  cd $srcdir/Eisenkraut
  ant dist
  cd dist
  tar -xvzopf Eisenkraut-linux-${pkgver}.tar.gz
  mv Eisenkraut ${pkgname}
}

package() {
  install -d "$pkgdir/usr/bin/"

  cat << EOF >> "$pkgdir/usr/bin/${pkgname}"
#!/bin/bash
cd /usr/share/$pkgname && java -jar Eisenkraut.jar
EOF

  chmod 755 "$pkgdir/usr/bin/${pkgname}"
  install -d ${pkgdir}/usr/share/eisenkraut
  cp -rf $srcdir/Eisenkraut/dist/${pkgname} ${pkgdir}/usr/share/
}
# Maintainer: Arch Linux Pro Audio <dev@archaudio.org>
# Contributor: svoufff <svoufff at gmail dot com>
# Contributor: Ray Rashif <schivmeister@gmail.com>

pkgname=jsampler
_pkgname=JSampler
pkgver=0.9
pkgrel=1
pkgdesc="Professional-grade audio sampler (LinuxSampler Java GUI)"
arch=(i686 x86_64)
url="http://sourceforge.net/projects/jsampler/"
license=('GPL')
depends=('jre' 'linuxsampler')
makedepends=('jdk' 'apache-ant')
source=(http://downloads.sourceforge.net/$pkgname/$_pkgname-$pkgver.tar.bz2
	jsampler.sh
	jsampler-classic.sh
	jsampler.desktop
	jsampler-classic.desktop)
md5sums=('e1915d9c222388caed7b8eac6579ab8a'
         'a0108bb22bd5eb0d60ab41d6cdf1f374'
         '9de2835fb1d9b139e81a5bec1f91fa2b'
         '65500cc73f7cbbd187eab3eb19f86bd0'
         'ec884e5b6f4210ffff331beeeb4be531')

build() {
  cd "$srcdir/$_pkgname-$pkgver"

  ant build-fantasia
  ant build-jsclassic

  # install java files
  install -Dm0644 dist/Fantasia-$pkgver.jar \
    "$pkgdir/usr/share/java/jsampler/fantasia.jar"
  install -Dm0644 dist/JS_Classic-$pkgver.jar \
    "$pkgdir/usr/share/java/jsampler/js-classic.jar"

  # install shell scripts
  install -Dm0755 ../jsampler.sh "$pkgdir/usr/bin/jsampler"
  install -Dm0755 ../jsampler-classic.sh \
    "$pkgdir/usr/bin/jsampler-classic"

  # install freedesktop.org compatibility
  install -Dm0644 res/fantasia/icons/app_icon.png \
    "$pkgdir/usr/share/pixmaps/jsampler.png"
  install -Dm0644 res/js-classic/icons/app-icon.png \
    "$pkgdir/usr/share/pixmaps/jsampler-classic.png"

  install -Dm0644 ../jsampler.desktop \
    "$pkgdir/usr/share/applications/jsampler.desktop"
  install -Dm0644 ../jsampler-classic.desktop \
    "$pkgdir/usr/share/applications/jsampler-classic.desktop"
}

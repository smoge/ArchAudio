# Contributor: Bernardo Barros <bernardobarros@gmail.com>

pkgname=csound-cecilia
pkgver=5.12.1
pkgrel=3
pkgdesc="A programming language designed and optimized for sound rendering and signal processing. Using Cecilia4 build configuration."
url="http://csound.sourceforge.net/"
arch=('i686' 'x86_64')
license=('LGPL' 'GPL')
depends=('python2' 'fltk' 'portaudio' 'java-environment')
makedepends=('scons' 'swig')
provides=('csound5' 'csound')
conflicts=('csound')
source=("http://downloads.sourceforge.net/csound/Csound$pkgver.tar.gz" SConstruct.patch)

md5sums=('70b0c4a159c4960a09719674657949c9'
         'f18a7fb19c2d46575cc6f830786da383')

_csOptions="usePortAudio=1 usePortMIDI=0 buildCsound5GUI=0 useOSC=1 buildPythonOpcodes=1 buildInterfaces=1 buildVirtual=1 dynamicCsoundLibrary=1 useDouble=1 useCoreAudio=0 buildPythonWrapper=1 prefix=/usr tclversion=8.5"

build() {

  cd $srcdir/Csound$pkgver

  patch -Nup0 < $srcdir/SConstruct.patch
  scons $_csOptions
  python2 install.py --prefix=$pkgdir/usr
}

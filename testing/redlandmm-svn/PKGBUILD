# Contributor: Max Pray a.k.a. Synthead <synthead@gmail.com>
# Contributor: Bernardo Barros <bernardobarros@gmail.com>

pkgname=redlandmm-svn
pkgver=1947
pkgrel=1
pkgdesc="An STL-style C++ wrapper for the Redland RDF Toolkit (librdf)"
arch=('i686' 'x86_64')
url="http://drobilla.net/blog/redlandmm/"
license="GPL"
depends=('glibmm>=2.4' 'raptor>=1.4.18' 'redland>=1.0.8')
makedepends=(subversion)
conflicts=(redlandmm)
provides=(redlandmm)

_svntrunk="http://svn.drobilla.net/lad/trunk"
_svnmod="trunk"

build() {

  cd ${srcdir}

  rm -rf ${_svnmod}-build

  if [ -d $_svnmod ] ; then
    (cd $_svnmod && svn update)
    msg "The local files are updated."
  else
    svn co ${_svntrunk} ${_svnmod}
  fi

  cp -rf ${_svnmod} ${_svnmod}-build

  cd ${_svnmod}-build

  msg "Starting build..."

  python2 waf configure --prefix=/usr
  python2 waf
  DESTDIR="$pkgdir" python2 waf install
}
